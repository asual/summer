<!--

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
    
        http://www.apache.org/licenses/LICENSE-2.0
   
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<ui:component
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cs="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    
    <cs:interface componentType="summer.faces.Component" componentClass="${empty cc.attrs.type ? 'text' : cc.attrs.type}">
        <cs:attribute name="dataFalse" required="false" />
        <cs:attribute name="dataLabel" required="false" />
        <cs:attribute name="size" required="false" />
        <cs:attribute name="title" required="false" />
        <cs:attribute name="type" required="false" />
        <cs:attribute name="value" required="false" />
    </cs:interface>
    
    <cs:implementation>

        <ui:remove>
            
            <!-- TODO: Implement all input types -->
            
            button
            checkbox
            color
            date 
            datetime 
            datetime-local 
            email 
            file
            hidden
            image
            month 
            number 
            password
            radio
            range 
            reset
            search
            submit
            tel
            text
            time 
            url
            week
        
        </ui:remove>
        
        <ui:fragment rendered="${cc.attrs.type eq 'hidden'}">
            <input id="${cc.formId}" name="${cc.formId}" value="${cc.attrs.value}" type="hidden" />
        </ui:fragment>
        
        <ui:fragment rendered="${cc.attrs.type eq 'submit'}">
            <input id="${cc.formId}" name="${cc.formId}" value="${cc.attrs.value}" type="submit" />
        </ui:fragment>
        
        <ui:fragment rendered="${cc.attrs.type eq 'reset'}">
            <input id="${cc.formId}" name="${cc.formId}" value="${cc.attrs.value}" type="reset" />
        </ui:fragment>
                
        <ui:fragment rendered="${cc.attrs.type eq 'checkbox'}">
            <ui:fragment rendered="${cc.attrs.dataFalse}">
                <input id="_${cc.formId}" name="_${cc.formName}" value="${cc.attrs.dataFalse}" type="hidden" />
            </ui:fragment>
            <input id="${cc.formId}" name="${cc.formName}" value="${cc.attrs.value}" 
                checked="${(cc.match or cc.attrs.checked) ? 'checked' : ''}" type="checkbox" />
            <ui:fragment rendered="${not empty cc.attrs.dataLabel}">
                <label for="${cc.formId}" title="${cc.attrs.title}">${cc.attrs.dataLabel}</label>
            </ui:fragment>
            <h:outputText rendered="${not empty cc.formName and not empty errors.get(cc.formName)}"
                value="${errors.get(cc.formName).message}" styleClass="error" />
        </ui:fragment>
        
        <ui:fragment rendered="${cc.attrs.type eq 'radio'}">
            <input id="${cc.formId}" name="${cc.formName}" value="${cc.attrs.value}" 
                checked="${(cc.match or cc.attrs.checked) ? 'checked' : ''}" type="radio" />
            <ui:fragment rendered="${not empty cc.attrs.dataLabel}">
                <label for="${cc.formId}" title="${cc.attrs.title}">${cc.attrs.dataLabel}</label>
            </ui:fragment>
            <h:outputText rendered="${not empty cc.formName and not empty errors.get(cc.formName)}"
                value="${errors.get(cc.formName).message}" styleClass="error" />
        </ui:fragment>
        
        <ui:fragment rendered="${cc.attrs.type eq 'file'}">
            <ui:fragment rendered="${not empty cc.attrs.dataLabel}">
                <label for="${cc.formId}" title="${cc.attrs.title}">${cc.attrs.dataLabel}</label>
            </ui:fragment>
            <input id="${cc.formId}" name="${cc.formId}" size="${cc.attrs.size}" type="file" 
                value="${empty errors.get(cc.formId) ? cc.attrs.value : errors.get(cc.formId).value}" />
            <h:outputText rendered="${not empty cc.formId and not empty errors.get(cc.formId)}"
                value="${errors.get(cc.formId).message}" styleClass="error" />
        </ui:fragment>

        <ui:fragment rendered="${empty cc.attrs.type or cc.attrs.type eq 'text' or cc.attrs.type eq 'email' or cc.attrs.type eq 'search'}">
            <ui:fragment rendered="${not empty cc.attrs.dataLabel}">
                <label for="${cc.formId}" title="${cc.attrs.title}">${cc.attrs.dataLabel}</label>
            </ui:fragment>
            <input id="${cc.formId}" name="${cc.formId}" size="${cc.attrs.size}" type="${empty cc.attrs.type ? 'text' : cc.attrs.type}" 
                value="${empty errors.get(cc.formId) ? cc.attrs.value : errors.get(cc.formId).value}" />
            <h:outputText rendered="${not empty cc.formId and not empty errors.get(cc.formId)}"
                value="${errors.get(cc.formId).message}" styleClass="error" />
        </ui:fragment>
            
    </cs:implementation>
    
</ui:component>